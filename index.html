<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>AdminLTE 2 | Blank Page</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="dist/css/bootstrap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
  <style type="text/css">
    .content-wrapper, .main-footer{
      margin-left: 0;
    }
    .article-content,
    .drop-zone{
      font-size: 16px;
    }
    [draggable] {
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      user-select: none;
      /* Required to make elements draggable in old WebKit */
      -khtml-user-drag: element;
      -webkit-user-drag: element;
    }
    .drop-zone{
      margin-top: 10px;
      border: 2px solid black;
      padding:20px;
    }
    .drop-zone.over:not(.filled-text-entity) {
      border-style: dashed;
    }
    .drop-zone.filled-text {
      border-color: #ff8d00;
    }
    .drop-zone.filled-text-entity {
      border-color: green;
    }
    .column{
      display: inline-block;
      margin: 0;
      margin-top: 10px;
    }
    .drop-zone h3,
    .column h3 {
      border: 1px solid #666666;
      padding:10px;
      background-color: #ccc;
      -webkit-border-radius: 10px;
      -ms-border-radius: 10px;
      -moz-border-radius: 10px;
      border-radius: 10px;
      -webkit-box-shadow: inset 0 0 3px #000;
      -ms-box-shadow: inset 0 0 3px #000;
      text-align: center;
      cursor: move;
      margin: 0;
      display: inline-block;
    }
    .drop-zone h3{
      display: block;
      margin-top: 10px;
    }
  </style>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<!-- Site wrapper -->
<div class="wrapper">

  <header class="main-header">
    <!-- Logo -->
    <a href="#" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <span class="logo-lg">Business Rules Tool</span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
    </nav>
  </header>

  <!-- =============================================== -->

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->

    <!-- Main content -->
    <section class="content">

      <div class="row">
        <div class="col-md-4">
          <div class="box box-solid">
            <div class="box-header with-border">
              <h3 class="box-title">Article</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">

              <div class="article-block">
                <h3 class="article-title">Labour's manifesto could break the fabric of the UK economy</h3>
                <div class="article-content" ondragstart="drag_text(event)">
                  Labour’s manifesto would completely break the fabric of Britain’s liberal and tolerant free market economy, replacing it with a command and control centralising experiment that would do untold damage to the very people Labour claim to support.

                  Let’s be clear; this is not a normal Labour manifesto. This Labour manifesto would uproot society to the detriment of rich and poor.

                  Read more: Labour and Conservatives already on track to break spending rules

                  Labour is right about one thing – the so-called rich (defined by them as earning over £80,000) would be hit hard while those who are actually rich and already pay 28 per cent of all the tax ( the top 1 per cent of earners) would, in numbers, leave the country, rendering their policies totally counter-productive.


                  Where Labour are 100 per cent wrong is that ‘the many’ would soon see their pensions, NHS and education crumble as capital fled the country and tax receipts withered.

                  Let’s make no mistake. This election will define whether Britain remains a liberal, tolerant free market open economy or moves towards a command, retributive and increasingly politically arbitrary country where investment, opportunity and jobs collapse.

                  The scale of Labour’s proposals are staggering. The headline £83bn, or 4 per cent of GDP, works out at an addition £2,515 of tax for each and every employee, but it is the scale of the detail that compounds this unprecedented largesse.

                  Over a decade Labour propose a £400bn ‘National Transformation Fund’, of which £250bn will be earmarked for a new Green Transformation Fund. Then there is the £250bn ‘National Investment Bank’ with a network of regional banks directly lending into ‘infrastructure and innovation’. Sounds great but such centralised direction of capital is not the role of the state. Such policies were tried to much smaller effect in the 1970s with disastrous consequences.

                  If this was not enough a £140bn Social Transformation Fund would direct investment in key infrastructure. Of course all this is before the potentially £200bn cost of nationalising water, rail, post and taxpayer-funded broadband.

                  Add that little lot up and we find additional commitments of close to £2 trillion over a decade or around £54,000 for each and every employee in the country. It is simply not credible.

                  What is clear is Labour wants to direct and control this investment in a highly centralised top-down fashion. This is the opposite to what should happen in a liberal economy with a myriad of micro individual and business bottom-up decisions based on the free market. Labour’s ideas are a recipe for waste, inefficiency and declining productivity.


                  Britain’s accumulated debt is currently £1.8 trillion, or 84 per cent of GDP, which is what many economists consider is close to a safe maximum. The deficit has, despite the disastrous position the Conservatives inherited from Labour, been brought slowly but surely under control.

                  Read more: IFS blasts both Tories’ and Labour’s spending plans

                  To increase spending even remotely on the scale proposed by Labour will cause immense capital flight and be counter-productive. Britain is currently an open economy and frankly individuals and business invested here because they viewed the UK as a safe haven in a dangerous world, with the rule of law, stable taxes, strong cultural assets and because, property rights were secure. Labour’s prospectus breaks that covenant.

                  Capital and talent will leave instantly if this Labour prospectus comes anywhere near happening. There is no example of any liberal, open western democracy that has adopted such a centralised command and control and frankly illiberal regime. None. We have to look to Latin America with Argentina being the closest analogy.

                  Soft words Mr Corbyn but your actions will do untold harm. You are honest enough to say you will harm the rich. But alas you will harm the poor too and cause immense social discord in the process.

                  Prosperity cannot be taken for granted, it is a fragile flower. Argentina, one of the richest nations on earth before the First World War now languishes. If Corbyn wins he will start the process of sending this great nation on the road to Argentina.
                </div>
              </div>

            </div>
            <!-- /.box-body -->
          </div>
        </div>
        <div class="col-md-4">
          <div class="box box-solid">
            <div class="box-header with-border">
              <h3 class="box-title">Rules</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body drop-container">
              <div class="drop-zone">
                Drop text here
              </div>
            </div>
            <!-- /.box-body -->
            <div class="box-footer">
              <button class="btn btn-primary disabled">Save</button>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="box box-solid">
            <div class="box-header with-border">
              <h3 class="box-title">Entities</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <div id="entity-columns">
                <div class="column" draggable="true"><h3>Company</h3></div>
                <div class="column" draggable="true"><h3>Money</h3></div>
                <div class="column" draggable="true"><h3>Location</h3></div>
                <div class="column" draggable="true"><h3>Time</h3></div>
              </div>
            </div>
            <!-- /.box-body -->
            <div class="box-footer">
              <div class="input-group input-group-sm">
                <input type="text" class="form-control" name="new-entity-text-box" placeholder="New entity">
                <span class="input-group-btn">
                  <button type="button" class="btn btn-info btn-flat btn-add-entity">Add</button>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>      

    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <footer class="main-footer">
    <strong>Copyright &copy; 2020 <a href="https://txtech.co">TxTech.co</a>.</strong> All rights
    reserved.
  </footer>
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 3 -->
<script src="jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="bootstrap/dist/js/bootstrap.min.js"></script>
<!-- SlimScroll -->
<script>
  $(document).ready(function () {
    $('.sidebar-menu').tree()
  })
  
  var dragEntity = null;
  var drop_zone = "<div class='drop-zone'>\n"+
                "Drop another text here\n"+
              "</div>";
  var entity_col = "#entity-columns .column";
  var drop_zone_elem = ".drop-zone"
  var entity_list = ['Company', 'Money', 'Location', 'Time'];

  function drag_text(ev) {
      const selection  = document.getSelection();
      ev.dataTransfer.setData('text:', selection.toString());
      ev.dataTransfer.setData('type', 'article-text');
  }

  function unselect_all_drops(){
    $(drop_zone_elem).removeClass("over")
  }

  $(document).on("dragstart", entity_col, function(e){
    // this.style.opacity = '0.4'; 
    e.originalEvent.dataTransfer.setData('type', 'entity-text');
    dragEntity = this;
  });

  $(document).on("dragend", entity_col, function(e){
    // this/e.target is the source node.

    unselect_all_drops();
  });

  $(document).on("dragover", drop_zone_elem, function(e){
    if (e.originalEvent.preventDefault) {
      e.originalEvent.preventDefault(); // Necessary. Allows us to drop.
    }
    // e.originalEvent.dataTransfer.dropEffect = 'move';  // See the section on the DataTransfer object.
    return false;
  });

  $(document).on("dragenter", drop_zone_elem, function(e){
    // this / e.target is the current hover target.
    this.classList.add('over');
  });

  $(document).on("dragleave", drop_zone_elem, function(e){
    this.classList.remove('over');  // this / e.target is previous target element.
  });

  $(document).on("drop", drop_zone_elem, function(e){
    e.originalEvent.preventDefault();
    if (e.originalEvent.stopPropagation) {
      e.originalEvent.stopPropagation(); // stops the browser from redirecting.
    }


    text_type = e.originalEvent.dataTransfer.getData('type');
    if(text_type == "article-text"){
      $(this).html(e.originalEvent.dataTransfer.getData('text'));
      $(this).addClass("filled-text");
      $(".drop-container").append(drop_zone);

    }else if(text_type == "entity-text"){
      if(dragEntity){
        if($(this).hasClass("filled-text")){
          $(this).append(dragEntity.innerHTML);
          $(this).addClass("filled-text-entity");
        }
      }
    }
    unselect_all_drops();
    return false;
  });

  $(document).on('click', '.btn-add-entity', function(e){
    var value = $("input[name='new-entity-text-box']").val();
    if(value){
      if(entity_list.includes(value)){
        alert("already exist")
      }else{
        $("#entity-columns").append('<div class="column" draggable="true"><h3>'+value+'</h3></div>')
        $("input[name='new-entity-text-box']").val("");
        entity_list.push(value);
      }
    }
  });

</script>
</body>
</html>
